<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE mapper PUBLIC
"-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Teacher-mapper">
	<insert id="insertTeacher" parameterType="Teacher">
		INSERT INTO TEACHER
		VALUES (SEQ_TNO.nextval,#{userNo}, #{tName}, #{tGender}, #{company}, #{subject}, 
		#{profile}, #{profileName}, DEFAULT)
	</insert>
	<select id="selectList" resultType="Teacher">
		SELECT * FROM TEACHER
		WHERE TSTATUS = 'Y'
	</select>
	<select id="selectTotalContents" resultType="int">
		SELECT COUNT(*) FROM TEACHER
	</select>
	
	<select id="teacherChart" parameterType="int" resultType="hashmap">
		SELECT TO_CHAR(ROUND(AVG((SCORE1 + SCORE2 + SCORE3 + SCORE4 + SCORE5)/5), 2)) Total,
              TO_CHAR(ROUND(AVG(SCORE1), 2)) score1,  
              TO_CHAR(ROUND(AVG(SCORE2), 2)) score2, 
              TO_CHAR(ROUND(AVG(SCORE3), 2)) score3,  
              TO_CHAR(ROUND(AVG(SCORE4), 2)) score4,  
              TO_CHAR(ROUND(AVG(SCORE5), 2)) score5
		FROM REVIEW
		WHERE TNO = #{tNo}
	</select>
	
	<select id="getTeacherCount" resultType="int">
		SELECT COUNT(*) FROM TEACHER
		WHERE TSTATUS = 'Y'
	</select>
	
	<select id="getReviewCount" resultType="int">
		SELECT COUNT(*) FROM REVIEW
		WHERE RSTATUS = 'N'
	</select>
	
	<select id="selectLive" resultType="Teacher">
	SELECT TE.*, (SELECT TO_CHAR(ROUND(AVG((SCORE1 + SCORE2 + SCORE3 +
	SCORE4 + SCORE5 + SCORE6
	+ SCORE7 + SCORE8 + SCORE9 + SCORE10)/10), 2))Total
	FROM TEACHER T
	JOIN REVIEW R ON(T.TNO=R.TNO)
	WHERE T.TNO = #{tNo} ) TOTAL
	FROM TEACHER TE
	WHERE TE.TNO = #{tNo}
	</select>
</mapper>
 